language: node_js

node_js:
 - "7"

cache:
 directories:
  - node_modules

before_script:
 - npm install -g hexo-cli
 - git clone --branch master https://github.com/wangjin252/github.io master
 - git config --global user.email "wangjin-252@hotmail.com"
 - git config --global user.name "wangjin252"
 - cd master
 - npm install

script:
 - hexo clean
 - hexo g

after_script:
 - sed -i "s/GITHUB_TOKEN/${GITHUB_TOKEN}/g" ./_config.yml
 - hexo d
